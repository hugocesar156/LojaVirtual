@model LojaVirtual.Models.Produto.Produto

@{
    ViewData["Title"] = "Cadastro de produto";
}

<div class="text-center">
    <h4>Cadastro de produto</h4>

    <form action="" method="post" id="form-cadastro">
        <div class="row justify-content-center text-center text-md-left mt-4">
            <div class="col-10 col-md-6 col-xl-5">
                <label>Nome</label>
                <input id="nome" type="text" class="form-control" maxlength="30" />
                <div id="nome" class="invalid-feedback"></div>
            </div>
            <div class="col-8 col-md-4 col-xl-3 text-center text-md-left mt-4 mt-md-0">
                <label>Categoria</label>
                <select id="categoria" class="custom-select form-control" >
                    <option value="">Selecione uma opção...</option>
                    @if (ViewBag.Categorias.Count > 0)
                    {
                        foreach (var item in ViewBag.Categorias)
                        {
                            <option value="@item.Key">@item.Value</option>
                        }
                    }
                </select>
            </div>
        </div>
        <div class="row justify-content-center mt-4">
            <div class="col-10 col-md-6 col-xl-4 text-center text-md-left">
                <label>Descrição</label>
                <textarea id="descricao" class="form-control" maxlength="150"></textarea>
                <div id="descricao" class="invalid-feedback"></div>
            </div>
            <div class="col-4 col-md-3 col-xl-2 text-left mt-4 mt-md-0">
                <label>Valor</label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <div class="input-group-text">R$</div>
                    </div>
                    <input id="valor" type="text" class="form-control real" style="text-align: center"
                           placeholder="0,00" />
                    <div id="valor" class="invalid-feedback msg-valor"></div>
                </div>
            </div>
            <div class="col-4 col-md-3 col-xl-2 text-left mt-4 mt-md-0">
                <label>Qtd.estoque</label>
                <input id="estoque" type="text" class="form-control quantidade"
                       placeholder="000" style="text-align: center"  />
                <div id="estoque" class="invalid-feedback msg-valor"></div>
            </div>
        </div>
        <div class="row mt-4 justify-content-center">
            <div class="col-8 col-md-4 col-xl-3 text-center text-md-left">
                <label>Fabricante</label>
                <input id="fabricante" type="text" class="form-control" maxlength="25"  />
                <div id="fabricante" class="invalid-feedback"></div>
            </div>
            <div class="col-8 col-md-4 col-xl-3 text-center text-md-left mt-3 mt-md-0">
                <label>Modelo</label>
                <input id="modelo" type="text" class="form-control" maxlength="25"  />
                <div id="modelo" class="invalid-feedback"></div>
            </div>
            <div class="col-8 col-md-4 col-xl-2 text-center text-md-left mt-3 mt-md-0">
                <label>Cor</label>
                <input id="cor" type="text" class="form-control" maxlength="20" />
                <div id="cor" class="invalid-feedback"></div>
            </div>
        </div>
        <div class="row justify-content-center mt-4">
            <div class="col-4 col-md-3 col-xl-2 text-left">
                <label>Largura</label>
                <div class="input-group">
                    <input id="largura" type="text" class="form-control cm" style="text-align: center"
                           placeholder="0"  />
                    <div class="input-group-prepend">
                        <div class="input-group-text">cm</div>
                    </div>
                    <div id="largura" class="invalid-feedback msg-largura"></div>
                </div>
            </div>
            <div class="col-4 col-md-3 col-xl-2 text-left">
                <label>Altura</label>
                <div class="input-group">
                    <input id="altura" type="text" class="form-control cm" style="text-align: center"
                           placeholder="0" />
                    <div class="input-group-prepend">
                        <div class="input-group-text">cm</div>
                    </div>
                    <div id="altura" class="invalid-feedback msg-altura"></div>
                </div>
            </div>
            <div class="col-4 col-md-3 col-xl-2 text-left">
                <label>Comprimento</label>
                <div class="input-group">
                    <input id="comprimento" type="text" class="form-control cm" style="text-align: center"
                           placeholder="0"/>
                    <div class="input-group-prepend">
                        <div class="input-group-text">cm</div>
                    </div>
                    <div id="comprimento" class="invalid-feedback msg-comprimento"></div>
                </div>
            </div>
            <div class="col-4 col-md-3 col-xl-2 text-lg-left mt-3 mt-md-0 mt-xl-0">
                <label>Peso</label>
                <div class="input-group">
                    <input id="peso" type="text" class="form-control kg" style="text-align: center"
                           placeholder="0,00"/>
                    <div class="input-group-prepend">
                        <div class="input-group-text">Kg</div>
                    </div>
                    <div id="cor" class="invalid-feedback msg-peso"></div>
                </div>
            </div>
        </div>
        <div class="row justify-content-center mt-4">
            <div class="col-9">
                <input type="hidden" id="dimensao" />
                <div id="dimensao" class="invalid-feedback msg-dimensao"></div>
            </div>
        </div>
        <div class="row justify-content-center mt-5 mb-3">
            <button class="btn btn-success col-6 col-sm-5 col-md-3" type="button" onclick="ValidaRegistro()">Registrar</button>
        </div>
    </form>

    <form id="form-cadastro-imagem" class="d-none">
        <div class="row justify-content-center text-left mt-5">
            <div class="col-4">
                <div class="input-group">
                    <div class="custom-file">
                        <input type="file" class="custom-file-input" onchange="CarregaImagem()">
                        <label data-browse="Selecionar" class="custom-file-label">Escolha o arquivo de imagem</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="d-none" id="form-imagem">
            <div class="row mt-4">
                <div class="col">
                    <img id="imagem" src="" width="150" height="150">
                    <input type="hidden" id="caminho" value="" />
                    <input type="hidden" id="id-produto" value="@Model.IdProduto" />
                </div>
            </div>
            <div class="row justify-content-center mt-1 mb-3">
                <button class="btn btn-sm btn-outline-success" id="salvar" type="button" onclick="SalvaImagem()"><i class="fa fa-check"></i></button>
                <button class="btn btn-sm btn-outline-danger ml-2" id="remover" type="button" onclick="DescartaImagem()"><i class="fa fa-trash"></i></button>
            </div>
        </div>

        <div id="lista-imagem">
            @await Html.PartialAsync("_Imagens", Model.Imagem)
        </div>

        <div class="row justify-content-center mt-5">
            <a class="btn btn-success col-6 col-sm-5 col-md-3" href="@Url.Action("Lista", "Produto")">Registrar</a>
        </div>
        <div class="row justify-content-center mt-3 mb-3">
            <button class="btn btn-danger col-6 col-sm-5 col-md-3" type="button" onclick="ExibeFormProduto()">Voltar</button>
        </div>
    </form>
</div>

<div class="modal fade" id="remove-imagem" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Confirmação de exclusão</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body text-left">
                Remover imagem de produto?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-danger" data-dismiss="modal" onclick="RemoveImagem()">Remover</button>
                <input type="hidden" id="caminho-remover" />
            </div>
        </div>
    </div>
</div>

<script src="~/jquery/jquery-3.5.1.min.js"></script>
<script src="~/js/Produto/validacao.js"></script>
<script src="~/js/Produto/imagem.js"></script>